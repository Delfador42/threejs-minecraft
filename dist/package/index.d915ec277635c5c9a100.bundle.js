(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{tjUo:function(e,t,i){"use strict";i.r(t);var s=i("Womt"),o=i("ET6W"),a={enableShadow:!1};class n{constructor(e){if(n._instanceObj&&n._instanceObj[e.key])return n._instanceObj[e.key];this.cubeOptions=e,this._materials=[],this._materialsMap=[],this._geometry=void 0,this._cubeSize=1,this.initMaterials(),this.initGeometry(),n._instanceObj={[e.key]:this}}initGeometry(){this._geometry||(this._geometry=new s.d(this._cubeSize,this._cubeSize,this._cubeSize))}initMaterials(){if(!this.cubeOptions.key)throw'"key" in cubeType is undefined';if(this._materialsMap&&(this._materials=this._materialsMap[this.cubeOptions.key]),this._materials&&0!==this._materials.length)return;this._materials=[];let e=new s.w,t=[];for(let i of this.cubeOptions.images){let o=e.load(i);o.generateMipmaps=!0,o.minFilter=s.n,o.magFilter=s.m,t.push(o)}let i=[];for(let e in t){let o=t[e];i.push(new s.l({map:o,fog:!0,...this.cubeOptions.materialParameters?this.cubeOptions.materialParameters:{},...this.cubeOptions.materialParametersForOneList&&this.cubeOptions.materialParametersForOneList[e]?this.cubeOptions.materialParametersForOneList[e]:{}}))}for(let e of this.cubeOptions.imageSet)this._materials.push(i[e]);this._materialsMap[this.cubeOptions.key]=this._materials}buildCube(e,t,i,o,n,r,h){o&&(this.cubeOptions=o,this.initMaterials()),e=e||0,t=t||0,i=i||0;let c=new s.k(this._geometry,this._materials);return c.receiveShadow=c.castShadow=a.enableShadow,c.position.x=e+this._cubeSize/2,c.position.y=t+this._cubeSize/2,c.position.z=i+this._cubeSize/2,n&&c.rotateX(n*Math.PI/180),r&&c.rotateY(r*Math.PI/180),h&&c.rotateZ(h*Math.PI/180),c.name=this.cubeOptions.key+"("+e+","+t+","+i+")",c}}var r=i("XFRQ"),h=i.n(r);class c{constructor(e){if(c._instance)return c._instance;let t;return t=new h.a,t.domElement.style.position="absolute",t.domElement.style.left="0px",t.domElement.style.top="0px",document.getElementById(e).appendChild(t.domElement),c._instance=this,this.stats=t,this}}function l(e,t,i){return Math.min(Math.max(i,e),t)}function g(e,t,i){return Math.min(Math.max(i,e),t)/4}var p=i("RyHr");class y{constructor(e,t){return this.camera=e,y._instance?y._instance:(this.controls=new p.a(e,t),this.controls.dampingFactor=1,this.controls.enablePan=!1,y._instance=this,y._instance)}initClickFunction(e,t){window.addEventListener("mousedown",t=>{let i=function(e,t,i){let o=new s.q,a=new s.x;return a.x=e.clientX/window.innerWidth*2-1,a.y=-e.clientY/window.innerHeight*2+1,o.setFromCamera(a,i),o.intersectObjects(t)}(t,e,this.camera);if(i.length>0){let e=i[0].object;console.log("点击的对象："+e.name)}},!1)}}var m=i("sxfH"),u={grass:{key:"grass",images:["./assets/img/blocks/grass_side.png","./assets/img/blocks/grass_top.png","./assets/img/blocks/dirt.png"],imageSet:[0,0,1,2,0,0],materialParameters:{},materialParametersForOneList:[{},{color:11664236}]},cobblestone:{key:"Cobblestone",images:["./assets/img/blocks/cobblestone.png"],imageSet:[0,0,0,0,0,0],materialParameters:{},materialParametersForOneList:[]},cobblestone_mossy:{key:"cobblestone_mossy",images:["./assets/img/blocks/cobblestone_mossy.png"],imageSet:[0,0,0,0,0,0],materialParameters:{},materialParametersForOneList:[]},stone:{key:"Stone",images:["./assets/img/blocks/stone.png"],imageSet:[0,0,0,0,0,0],materialParameters:{},materialParametersForOneList:[]},stone_slab:{key:"stone_slab",images:["./assets/img/blocks/stone_slab_side.png","./assets/img/blocks/stone_slab_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},planks_birch:{key:"planks_birch",images:["./assets/img/blocks/planks_birch.png"],imageSet:[0,0,0,0,0,0],materialParameters:{},materialParametersForOneList:[]},log_acacia:{key:"log_acacia",images:["./assets/img/blocks/log_acacia.png","./assets/img/blocks/log_acacia_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},leaves_acacia:{key:"leaves_acacia",images:["./assets/img/blocks/leaves_acacia.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884,transparent:!0},materialParametersForOneList:[]},leaves_acacia_opaque:{key:"leaves_acacia_opaque",images:["./assets/img/blocks/leaves_acacia_opaque.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884},materialParametersForOneList:[]},log_birch:{key:"log_birch",images:["./assets/img/blocks/log_birch.png","./assets/img/blocks/log_birch_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},leaves_birch:{key:"leaves_birch",images:["./assets/img/blocks/leaves_birch.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884,transparent:!0},materialParametersForOneList:[]},leaves_birch_opaque:{key:"leaves_birch_opaque",images:["./assets/img/blocks/leaves_birch_opaque.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884},materialParametersForOneList:[]},log_jungle:{key:"log_jungle",images:["./assets/img/blocks/log_jungle.png","./assets/img/blocks/log_jungle_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},leaves_jungle:{key:"leaves_jungle",images:["./assets/img/blocks/leaves_jungle.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884,transparent:!0},materialParametersForOneList:[]},leaves_jungle_opaque:{key:"leaves_jungle_opaque",images:["./assets/img/blocks/leaves_jungle_opaque.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884},materialParametersForOneList:[]},log_oak:{key:"log_oak",images:["./assets/img/blocks/log_oak.png","./assets/img/blocks/log_oak_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},leaves_oak:{key:"leaves_oak",images:["./assets/img/blocks/leaves_oak.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884,transparent:!0},materialParametersForOneList:[]},leaves_oak_opaque:{key:"leaves_oak_opaque",images:["./assets/img/blocks/leaves_oak_opaque.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884},materialParametersForOneList:[]},log_spruce:{key:"log_spruce",images:["./assets/img/blocks/log_spruce.png","./assets/img/blocks/log_spruce_top.png"],imageSet:[0,0,1,1,0,0],materialParameters:{},materialParametersForOneList:[]},leaves_spruce:{key:"leaves_spruce",images:["./assets/img/blocks/leaves_spruce.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884,transparent:!0},materialParametersForOneList:[]},leaves_spruce_opaque:{key:"leaves_spruce_opaque",images:["./assets/img/blocks/leaves_spruce_opaque.png"],imageSet:[0,0,0,0,0,0],materialParameters:{color:9025884},materialParametersForOneList:[]}};class d{constructor(e,t,i,o){return d._instance?d._instance:(this.camera=e,this.objects=i,this.scene=o,this.currentCubeTypeIndex=0,this.checkRay={X0:[],X1:[],Z0:[],Z1:[],Y0:[],Y1:[]},this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.preRuning=void 0,this.isRunning=!1,this.canJump=!1,this.velocity=new s.y,this.direction=new s.y,this.worldOption={g:9},this.personOption={height:1.8,sightHeight:1.5,jumpHeight:1.4,speedWalk:5.7,speedRun:10,accelerateRateStart:.3,accelerateRateStop:.8,thickness:.6},this.init(e,t),d._instance=this,d._instance)}init(e,t){this.controls=new m.a(e,t);{let e=document.createElement("div");e.style.position="absolute",e.style.zIndex="100",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.id="blocker",document.body.append(e),e.addEventListener("click",()=>{this.controls.lock()},!1),this.controls.addEventListener("lock",(function(){e.style.display="none"})),this.controls.addEventListener("unlock",(function(){e.style.display="block"}))}{let e=document.createElement("div");e.style.height="2px",e.style.width="20px",k(e),document.body.append(e);let t=document.createElement("div");t.style.height="20px",t.style.width="2px",k(t),document.body.append(t)}document.addEventListener("keydown",e=>{switch(e.keyCode){case 38:case 87:if(this.moveForward)break;this.preRuning?(this.isRunning=performance.now()-this.preRuning<=200,this.preRuning=performance.now()):this.preRuning=performance.now(),this.moveForward=!0;break;case 37:case 65:if(this.moveLeft)break;this.moveLeft=!0;break;case 40:case 83:if(this.moveBackward)break;this.moveBackward=!0;break;case 39:case 68:if(this.moveRight)break;this.moveRight=!0;break;case 32:this.canJump&&(this.velocity.y+=Math.sqrt(2*this.worldOption.g*7.74*this.personOption.jumpHeight)),this.canJump=!1}},!1),document.addEventListener("keyup",e=>{switch(e.keyCode){case 38:case 87:this.isRunning=!1,this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1}},!1);for(let e=0;e<6;e++)this.checkRay.X0.push(new s.q(new s.y,new s.y(-1,0,0),0,0));for(let e=0;e<6;e++)this.checkRay.X1.push(new s.q(new s.y,new s.y(1,0,0),0,0));for(let e=0;e<6;e++)this.checkRay.Z0.push(new s.q(new s.y,new s.y(0,0,-1),0,0));for(let e=0;e<6;e++)this.checkRay.Z1.push(new s.q(new s.y,new s.y(0,0,1),0,0));for(let e=0;e<4;e++)this.checkRay.Y0.push(new s.q(new s.y,new s.y(0,-1,0),0,0));for(let e=0;e<4;e++)this.checkRay.Y1.push(new s.q(new s.y,new s.y(0,1,0),0,0));this.initMouseFunction()}update(e){console.log(this.objects.length),e=e||.016,this.controls.isLocked||(this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1);{this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveRight)-Number(this.moveLeft),this.direction.normalize();let t=this.isRunning?this.personOption.speedRun:this.personOption.speedWalk;if(this.moveForward||this.moveBackward){let e=this.velocity.z+this.direction.z*t*this.personOption.accelerateRateStart;Math.abs(e)<t?this.velocity.z=e:this.velocity.z=this.direction.z*t}else this.velocity.z=Math.abs(this.velocity.z)>1?this.velocity.z*this.personOption.accelerateRateStop:0;if(this.moveLeft||this.moveRight){let e=this.velocity.x+this.direction.x*t*this.personOption.accelerateRateStart;Math.abs(e)<t?this.velocity.x=e:this.velocity.x=this.direction.x*t}else this.velocity.x=Math.abs(this.velocity.x)>1?this.velocity.x*this.personOption.accelerateRateStop:0;let i=this.controls.getObject().position.x,s=this.controls.getObject().position.z;this.controls.moveForward(this.velocity.z*e),this.controls.moveRight(this.velocity.x*e);{let e=void 0;{for(let e=0;e<6;e++)this.checkRay.Z0[e].ray.origin.copy(this.controls.getObject().position),this.checkRay.Z0[e].ray.origin.x=i;let t=this.personOption.thickness/2;this.checkRay.Z0[0].ray.origin.x+=t,this.checkRay.Z0[0].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.Z0[1].ray.origin.x-=t,this.checkRay.Z0[1].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.Z0[2].ray.origin.x+=t,this.checkRay.Z0[2].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.Z0[3].ray.origin.x-=t,this.checkRay.Z0[3].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.Z0[4].ray.origin.x+=t,this.checkRay.Z0[4].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05,this.checkRay.Z0[5].ray.origin.x-=t,this.checkRay.Z0[5].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05;for(let t=0;t<6;t++){let i=this.checkRay.Z0[t].intersectObjects(this.objects);if(i.length>0){let t=i[0].point.z;e=Math.max(void 0===e?t:e,t)}}}let t=void 0;{for(let e=0;e<6;e++)this.checkRay.Z1[e].ray.origin.copy(this.controls.getObject().position),this.checkRay.Z1[e].ray.origin.x=i;let e=this.personOption.thickness/2;this.checkRay.Z1[0].ray.origin.x+=e,this.checkRay.Z1[0].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.Z1[1].ray.origin.x-=e,this.checkRay.Z1[1].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.Z1[2].ray.origin.x+=e,this.checkRay.Z1[2].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.Z1[3].ray.origin.x-=e,this.checkRay.Z1[3].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.Z1[4].ray.origin.x+=e,this.checkRay.Z1[4].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05,this.checkRay.Z1[5].ray.origin.x-=e,this.checkRay.Z1[5].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05;for(let e=0;e<6;e++){let i=this.checkRay.Z1[e].intersectObjects(this.objects);if(i.length>0){let e=i[0].point.z;t=Math.min(void 0===t?e:t,e)}}}let s=this.controls.getObject().position.z;s=Math.max(void 0===e?s:e+this.personOption.thickness/2+.001,s),s=Math.min(void 0===t?s:t-this.personOption.thickness/2-.001,s),this.controls.getObject().position.z=s}{let e=void 0;{for(let e=0;e<6;e++)this.checkRay.X0[e].ray.origin.copy(this.controls.getObject().position),this.checkRay.X0[e].ray.origin.z=s;let t=this.personOption.thickness/2;this.checkRay.X0[0].ray.origin.z+=t,this.checkRay.X0[0].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.X0[1].ray.origin.z-=t,this.checkRay.X0[1].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.X0[2].ray.origin.z+=t,this.checkRay.X0[2].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.X0[3].ray.origin.z-=t,this.checkRay.X0[3].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.X0[4].ray.origin.z+=t,this.checkRay.X0[4].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.051,this.checkRay.X0[5].ray.origin.z-=t,this.checkRay.X0[5].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.051;for(let t=0;t<6;t++){let i=this.checkRay.X0[t].intersectObjects(this.objects);if(i.length>0){let t=i[0].point.x;e=Math.max(void 0===e?t:e,t)}}}let t=void 0;{for(let e=0;e<6;e++)this.checkRay.X1[e].ray.origin.copy(this.controls.getObject().position),this.checkRay.X1[e].ray.origin.z=s;let e=this.personOption.thickness/2;this.checkRay.X1[0].ray.origin.z+=e,this.checkRay.X1[0].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.X1[1].ray.origin.z-=e,this.checkRay.X1[1].ray.origin.y-=this.personOption.sightHeight-.05,this.checkRay.X1[2].ray.origin.z+=e,this.checkRay.X1[2].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.X1[3].ray.origin.z-=e,this.checkRay.X1[3].ray.origin.y-=this.personOption.sightHeight-this.personOption.height/2,this.checkRay.X1[4].ray.origin.z+=e,this.checkRay.X1[4].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05,this.checkRay.X1[5].ray.origin.z-=e,this.checkRay.X1[5].ray.origin.y+=this.personOption.height-this.personOption.sightHeight-.05;for(let e=0;e<6;e++){let i=this.checkRay.X1[e].intersectObjects(this.objects);if(i.length>0){let e=i[0].point.x;t=Math.min(void 0===t?e:t,e)}}}let i=this.controls.getObject().position.x;i=Math.max(void 0===e?i:e+this.personOption.thickness/2+.001,i),i=Math.min(void 0===t?i:t-this.personOption.thickness/2-.001,i),this.controls.getObject().position.x=i}}{let t=void 0;{for(let e=0;e<4;e++)this.checkRay.Y0[e].ray.origin.copy(this.controls.getObject().position);let e=this.personOption.thickness/2;this.checkRay.Y0[0].ray.origin.x+=e,this.checkRay.Y0[0].ray.origin.z-=e,this.checkRay.Y0[1].ray.origin.x+=e,this.checkRay.Y0[1].ray.origin.z+=e,this.checkRay.Y0[2].ray.origin.x-=e,this.checkRay.Y0[2].ray.origin.z+=e,this.checkRay.Y0[3].ray.origin.x-=e,this.checkRay.Y0[3].ray.origin.z-=e;for(let e=0;e<4;e++){let i=this.checkRay.Y0[e].intersectObjects(this.objects);if(i.length>0){let e=i[0].point.y;t=Math.max(void 0===t?e:t,e)}}}let i=void 0;{for(let e=0;e<4;e++)this.checkRay.Y1[e].ray.origin.copy(this.controls.getObject().position);let e=this.personOption.thickness/2-.01;this.checkRay.Y1[0].ray.origin.x+=e,this.checkRay.Y1[0].ray.origin.z-=e,this.checkRay.Y1[1].ray.origin.x+=e,this.checkRay.Y1[1].ray.origin.z+=e,this.checkRay.Y1[2].ray.origin.x-=e,this.checkRay.Y1[2].ray.origin.z+=e,this.checkRay.Y1[3].ray.origin.x-=e,this.checkRay.Y1[3].ray.origin.z-=e;for(let e=0;e<4;e++){let t=this.checkRay.Y1[e].intersectObjects(this.objects);if(t.length>0){let e=t[0].point.y;i=Math.min(void 0===i?e:i,e)}}}let s=this.controls.getObject().position.y+this.velocity.y*e;void 0!==i&&s>i-(this.personOption.height-this.personOption.sightHeight)&&(s=i-(this.personOption.height-this.personOption.sightHeight),this.velocity.y=0),void 0!==t?(s=Math.max(t+this.personOption.sightHeight,s),s===t+this.personOption.sightHeight?(this.velocity.y=0,this.canJump=!0):this.velocity.y-=this.worldOption.g*Math.sqrt(e)):this.velocity.y-=this.worldOption.g*Math.sqrt(e),this.controls.getObject().position.y=s}this.controls.getObject().position.y<-500&&(this.velocity.y=0,this.controls.getObject().position.y=500,this.controls.getObject().position.x=0,this.controls.getObject().position.z=0)}initMouseFunction(){window.addEventListener("mousedown",e=>{let t=function(e,t){let i=new s.q,o=new s.x;return o.x=0,o.y=0,i.setFromCamera(o,t),i.intersectObjects(e)}(this.scene.children,this.camera);if(t.length>0&&(console.log("点击对象【"+t[0].object.name+"】",t[0]),t[0]&&t[0].distance<=10&&t[0].face&&t[0].face.normal&&t[0].object&&t[0].object.position)){let i=t[0].face.normal,o=t[0].object.position,a=t[0].object.rotation,r=new s.y(i.x,i.y,i.z);r=r.applyAxisAngle(new s.y(1,0,0),a.x),r=r.applyAxisAngle(new s.y(0,1,0),a.y),r=r.applyAxisAngle(new s.y(0,0,1),a.z);let h={x:r.x+o.x-.5,y:r.y+o.y-.5,z:r.z+o.z-.5};if(2===e.button){let e=new n(u.grass);console.log("放置??",this.currentCubeTypeIndex);let t=e.buildCube(h.x,h.y,h.z,u[Object.keys(u)[this.currentCubeTypeIndex]]);this.scene.add(t),this.objects.push(t)}else if(0===e.button){console.log(t[0].object,this.scene.getObjectByName(t[0].object.name));let e=this.objects.findIndex(e=>e.id===t[0].object.id);e>=0&&this.objects.splice(e,1),this.scene.remove(this.scene.getObjectById(t[0].object.id))}}},!1),document.addEventListener&&document.addEventListener("DOMMouseScroll",e=>{(e=e||window.event).wheelDelta?this.changeCurrentCubeTypeIndex(e.wheelDelta<0):e.detail&&this.changeCurrentCubeTypeIndex(e.detail<0)},!1),window.onmousewheel=e=>{console.log("滑轮",this.currentCubeTypeIndex),(e=e||window.event).wheelDelta?this.changeCurrentCubeTypeIndex(e.wheelDelta<0):e.detail&&this.changeCurrentCubeTypeIndex(e.detail<0)}}changeCurrentCubeTypeIndex(e){e?(this.currentCubeTypeIndex++,this.currentCubeTypeIndex===Object.keys(u).length&&(this.currentCubeTypeIndex=0)):(0===this.currentCubeTypeIndex&&(this.currentCubeTypeIndex=Object.keys(u).length),this.currentCubeTypeIndex--)}}function k(e){e.style.position="fixed",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%,-50%)",e.style.zIndex="1",e.style.fontSize="100%",e.style.fontWeight="bold",e.style.textAlign="center",e.style.verticalAlign="middle",e.style.lineHeight="10px",e.style.fontFamily='"Times New Roman",serif',e.style.backgroundColor="#E0E0E0"}o.a.isWebGLAvailable()||document.body.appendChild(o.a.getWebGLErrorMessage());let b,O=document.getElementById("canvas-frame"),w=function(){let e=new s.r;return e.name="SCENE",e.fog=new s.i(8900331,.005),function(t){t=t||1;let i=(new s.e).load(["./assets/img/1.png","./assets/img/2.png","./assets/img/3.png","./assets/img/4.png","./assets/img/5.png","./assets/img/6.png"]);if(1===t)e.background=new s.c(8900331);else if(2===t)e.background=i;else{let t=s.s.cube;t.uniforms.tCube.value=i;let o=new s.t({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:t.uniforms,depthWrite:!1,side:s.b}),a=new s.k(new s.d(1e6,1e6,1e6),o);e.add(a)}}(1),e}(),f=function(){let e=new s.a;return e.castShadow=!1,e.color=(new s.c).setHex(16777215),e.intensity=l(),e}();w.add(f),a.enableShadow&&(b=function(){let e=new s.f;return e.castShadow=a.enableShadow,e.color=(new s.c).setHex(16777215),e.intensity=g(),e.shadow.radius=512,e.position.x=10,e.position.y=-10,e.position.z=10,e}(),w.add(b));let v=function(){let e=new s.o;return e.name="CAMERA",e.fov=45,e.near=.1,e.far=1e3,e.position.x=0,e.position.y=10,e.position.z=0,e}();v.aspect=O.offsetWidth/O.offsetHeight,v.updateProjectionMatrix(),w.add(v);let _=function(){let e=new s.z;return e.name="RENDERER",e.antialias=!0,e.shadowMap.enabled=a.enableShadow,e.setClearColor(16777215,1),e}();_.setSize(O.offsetWidth,O.offsetHeight),_.setPixelRatio(window.devicePixelRatio),document.getElementById("canvas-frame").appendChild(_.domElement);let R=[],x=function(e,t,i,s,o){let a;switch(e){case"ShowOrbitControl":let e=new y(i,s.domElement);e.initClickFunction(t.children),a=e.controls;break;case"MCFirstPersonControl":a=new d(i,s.domElement,o,t)}return a}("MCFirstPersonControl",w,v,_,R),j={current:1,low:.4,high:1,becomeHigher:!0};!function(){let e=new n(u.grass);{let t=[],i=10;for(let e=-i;e<i;e++)for(let s=-i;s<i;s++)t.push([e,-1,s]);for(let e=0;e<5;e++)for(let i=0;i<5;i++)for(let s=0;s<5;s++)s>=e&&t.push([e-7,s-e,i-7]);{let e=4;for(let i=0;i<e;i++)for(let s=i;s<2*e-i;s++)for(let o=i;o<2*e-i;o++)t.push([s-5,i,o+1])}for(let e=0;e<5;e++)for(let i=0;i<5;i++)2===e&&2===i||t.push([e,0,i-5]);t.push([0,1,-5]),t.push([3,3,-5]),t.push([2,3,-5]),t.push([3,3,-4]),t.push([2,3,-4]),t.push([3,3,-6]),t.push([2,3,-6]),t.push([3,3,-7]),t.push([2,3,-7]),t.push([3,2,-8]),t.push([2,2,-8]),t.push([5,2,-4]),t.push([4,2,-4]),t.push([0,1,-5]);let s=-10;for(let e of Object.values(u))t.push([8,1,s++,e,90]);t.push([0,10,0,u.grass]);for(let i of t){let t=e.buildCube(...i);w.add(t),R.push(t)}}}();let z=performance.now();!function e(){requestAnimationFrame(e);let t=performance.now(),i=(t-z)/1e3;z=t,x.update(),_.render(w,v),new c("canvas-frame").stats.update(i),function(){if(f.intensity=l(j.current,j.high,j.low),a.enableShadow&&(b.intensity=g(j.current,j.high,j.low)),j.becomeHigher){j.current>=j.low-(j.high-j.low)?j.current-=.002:j.becomeHigher=!1}else j.current<=j.high+(j.high-j.low)?j.current+=.002:j.current>1.5&&(j.becomeHigher=!0)}()}(),window.onresize=()=>{v.aspect=O.offsetWidth/O.offsetHeight,v.updateProjectionMatrix(),_.setSize(O.offsetWidth,O.offsetHeight)},window.onload=()=>{!function(){let e,t=0,i=["./assets/sound/calm1.ogg","./assets/sound/calm2.ogg","./assets/sound/calm3.ogg","./assets/sound/hal1.ogg","./assets/sound/hal2.ogg","./assets/sound/hal3.ogg","./assets/sound/hal4.ogg"];e=new Audio,e.preload="true",e.controls=!0,e.autoplay=!0,e.hidden=!0,e.style.display="none",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.zIndex="101",e.loop=!1,e.src=i[t],e.addEventListener("ended",(function(){t++,t>=i.length&&(t=0);e.src=i[t],e.play()}),!1),document.addEventListener("click",(function t(){e.play(),document.removeEventListener("click",t,!1)}),!1),document.body.appendChild(e)}()}}},[["tjUo",1,2]]]);
//# sourceMappingURL=index.d915ec277635c5c9a100.bundle.js.map